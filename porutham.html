
<!DOCTYPE html>
<html lang="ml">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¥ï‡µá‡¥∞‡¥≥ ‡¥ú‡µç‡¥Ø‡µã‡¥§‡¥ø‡¥∑‡¥Ç | ‡¥µ‡¥ø‡¥µ‡¥æ‡¥π ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç</title>

<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Malayalam:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{margin:0;font-family:"Noto Sans Malayalam",sans-serif;background:#f4fbf6;color:#1b3a2b}
header{background:linear-gradient(90deg,#ff9800,#f57c00);color:#fff;padding:18px;text-align:center}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#fff;padding:22px;border-radius:14px;box-shadow:0 8px 20px rgba(0,0,0,.08)}
label{display:block;margin-top:10px}
input{width:100%;padding:8px;border-radius:6px;border:1px solid #b7d8c6}
button{margin-top:16px;width:100%;padding:12px;font-size:16px;background:#198754;color:#fff;border:none;border-radius:8px;cursor:pointer}
button:hover{background:#146c43}
#result{display:none;margin-top:20px;padding:20px;border-radius:12px;background:#e8f5e9}
hr{margin:18px 0}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #c8e6c9;padding:8px;text-align:left}
th{background:#c8e6c9}
.pass{color:#2e7d32;font-weight:bold}
.fail{color:#c62828;font-weight:bold}
.score{font-size:22px;font-weight:bold}
.good{color:#2e7d32}
.warn{color:#ef6c00}
.bad{color:#c62828}
</style>
</head>

<body>

<header>

<h1><a href="index.html">üïâÔ∏è ‡¥ï‡µá‡¥∞‡¥≥ ‡¥ú‡µç‡¥Ø‡µã‡¥§‡¥ø‡¥∑‡¥Ç</a></h1>
<p>‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç ‡¥™‡¥û‡µç‡¥ö‡¥æ‡¥Ç‡¥ó‡¥Ç ‡¥Ö‡¥ü‡¥ø‡¥∏‡µç‡¥•‡¥æ‡¥®‡¥Æ‡¥æ‡¥ï‡µç‡¥ï‡¥ø‡¥Ø ‡¥µ‡¥ø‡¥∂‡¥¶‡¥Æ‡¥æ‡¥Ø ‡¥µ‡¥ø‡¥µ‡¥æ‡¥π ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§ ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥®</p>
</header>

<div class="container">
<div class="card">

<h2>‡¥µ‡¥ø‡¥µ‡¥æ‡¥π ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§ ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥®</h2>

<label>‡¥µ‡¥∞‡µª ‡¥™‡µá‡¥∞‡µç</label>
<input id="bName">

<label>‡¥ú‡¥®‡¥® ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø</label>
<input type="date" id="bDob">

<label>‡¥ú‡¥®‡¥® ‡¥∏‡¥Æ‡¥Ø‡¥Ç</label>
<input type="time" id="bTime">

<hr>

<label>‡¥µ‡¥ß‡µÅ ‡¥™‡µá‡¥∞‡µç</label>
<input id="gName">

<label>‡¥ú‡¥®‡¥® ‡¥§‡µÄ‡¥Ø‡¥§‡¥ø</label>
<input type="date" id="gDob">

<label>‡¥ú‡¥®‡¥® ‡¥∏‡¥Æ‡¥Ø‡¥Ç</label>
<input type="time" id="gTime">

<button onclick="checkPorutham()">‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç ‡¥™‡¥∞‡¥ø‡¥∂‡µã‡¥ß‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï</button>

<div id="result"></div>

</div>
</div>

<script>
// ================= NAKSHATRA DATA =================
const nakshatras=[
"‡¥Ö‡¥∂‡µç‡¥µ‡¥§‡¥ø","‡¥≠‡¥∞‡¥£‡¥ø","‡¥ï‡¥æ‡µº‡¥§‡µç‡¥§‡¥ø‡¥ï","‡¥∞‡µã‡¥π‡¥ø‡¥£‡¥ø","‡¥Æ‡¥ï‡¥Ø‡¥ø‡¥∞‡¥Ç","‡¥§‡¥ø‡¥∞‡µÅ‡¥µ‡¥æ‡¥§‡¥ø‡¥∞","‡¥™‡µÅ‡¥®‡µº‡¥§‡¥Ç","‡¥™‡µÇ‡¥Ø‡¥Ç","‡¥Ü‡¥Ø‡¥ø‡¥≤‡µç‡¥Ø‡¥Ç",
"‡¥Æ‡¥ï‡¥Ç","‡¥™‡µÇ‡¥∞‡¥Ç","‡¥â‡¥§‡µç‡¥∞‡¥Ç","‡¥Ö‡¥§‡µç‡¥§‡¥Ç","‡¥ö‡¥ø‡¥§‡µç‡¥§‡¥ø‡¥∞","‡¥ö‡µã‡¥§‡¥ø","‡¥µ‡¥ø‡¥∂‡¥æ‡¥ñ‡¥Ç",
"‡¥Ö‡¥®‡¥ø‡¥¥‡¥Ç","‡¥§‡µç‡¥∞‡¥ø‡¥ï‡µç‡¥ï‡µá‡¥ü‡µç‡¥ü","‡¥Æ‡µÇ‡¥≤‡¥Ç",
"‡¥™‡µÇ‡¥∞‡¥æ‡¥ü‡¥Ç","‡¥â‡¥§‡µç‡¥∞‡¥æ‡¥ü‡¥Ç","‡¥§‡¥ø‡¥∞‡µÅ‡¥µ‡µã‡¥£‡¥Ç","‡¥Ö‡¥µ‡¥ø‡¥ü‡µç‡¥ü‡¥Ç","‡¥ö‡¥§‡¥Ø‡¥Ç",
"‡¥™‡µÇ‡¥∞‡µÇ‡¥∞‡µÅ‡¥ü‡µç‡¥ü‡¥æ‡¥§‡¥ø","‡¥â‡¥§‡µç‡¥∞‡¥ü‡µç‡¥ü‡¥æ‡¥§‡¥ø","‡¥∞‡µá‡¥µ‡¥§‡¥ø"
];

// ================= ASTRONOMY =================
function julianDayIST(d){return d.getTime()/86400000+2440587.5-(5.5/24)}
function lahiriAyanamsa(jd){return 22.460148+1.396042*(jd-2451545)/36525}
function moonLongitude(jd){
  const T=(jd-2451545)/36525;
  let L=218.3164477+481267.88123421*T;
  let D=297.8501921+445267.1114034*T;
  let Mp=134.9633964+477198.8675055*T;
  L+=6.289*Math.sin(Mp*Math.PI/180);
  L-=1.274*Math.sin((2*D-Mp)*Math.PI/180);
  L+=0.658*Math.sin(2*D*Math.PI/180);
  L-=0.214*Math.sin(2*Mp*Math.PI/180);
  L-=0.11*Math.sin(D*Math.PI/180);
  return (L%360+360)%360;
}
function nakshatraIndex(dob,time){
  const dt=new Date(dob+"T"+time+":00");
  const jd=julianDayIST(dt);
  const nir=(moonLongitude(jd)-lahiriAyanamsa(jd)+360)%360;
  return Math.floor(nir/(360/27));
}

// ================= PORUTHAM DATA =================
const gana=[
"‡¥¶‡µá‡¥µ","‡¥Æ‡¥®‡µÅ‡¥∑‡µç‡¥Ø","‡¥∞‡¥æ‡¥ï‡µç‡¥∑‡¥∏","‡¥Æ‡¥®‡µÅ‡¥∑‡µç‡¥Ø","‡¥¶‡µá‡¥µ","‡¥Æ‡¥®‡µÅ‡¥∑‡µç‡¥Ø","‡¥¶‡µá‡¥µ","‡¥¶‡µá‡¥µ","‡¥∞‡¥æ‡¥ï‡µç‡¥∑‡¥∏",
"‡¥∞‡¥æ‡¥ï‡µç‡¥∑‡¥∏","‡¥Æ‡¥®‡µÅ‡¥∑‡µç‡¥Ø","‡¥Æ‡¥®‡µÅ‡¥∑‡µç‡¥Ø","‡¥¶‡µá‡¥µ","‡¥∞‡¥æ‡¥ï‡µç‡¥∑‡¥∏","‡¥¶‡µá‡¥µ","‡¥∞‡¥æ‡¥ï‡µç‡¥∑‡¥∏",
"‡¥¶‡µá‡¥µ","‡¥∞‡¥æ‡¥ï‡µç‡¥∑‡¥∏","‡¥∞‡¥æ‡¥ï‡µç‡¥∑‡¥∏",
"‡¥Æ‡¥®‡µÅ‡¥∑‡µç‡¥Ø","‡¥Æ‡¥®‡µÅ‡¥∑‡µç‡¥Ø","‡¥¶‡µá‡¥µ","‡¥∞‡¥æ‡¥ï‡µç‡¥∑‡¥∏","‡¥∞‡¥æ‡¥ï‡µç‡¥∑‡¥∏",
"‡¥Æ‡¥®‡µÅ‡¥∑‡µç‡¥Ø","‡¥Æ‡¥®‡µÅ‡¥∑‡µç‡¥Ø","‡¥¶‡µá‡¥µ"
];
const rajju=[
"‡¥™‡¥æ‡¥¶","‡¥™‡¥æ‡¥¶","‡¥®‡¥æ‡¥≠‡¥ø","‡¥®‡¥æ‡¥≠‡¥ø","‡¥ï‡¥£‡µç‡¥†‡¥Ç","‡¥ï‡¥£‡µç‡¥†‡¥Ç","‡¥∂‡¥ø‡¥∞‡¥∏‡µç","‡¥∂‡¥ø‡¥∞‡¥∏‡µç","‡¥™‡¥æ‡¥¶",
"‡¥™‡¥æ‡¥¶","‡¥®‡¥æ‡¥≠‡¥ø","‡¥®‡¥æ‡¥≠‡¥ø","‡¥ï‡¥£‡µç‡¥†‡¥Ç","‡¥ï‡¥£‡µç‡¥†‡¥Ç","‡¥∂‡¥ø‡¥∞‡¥∏‡µç","‡¥∂‡¥ø‡¥∞‡¥∏‡µç",
"‡¥™‡¥æ‡¥¶","‡¥™‡¥æ‡¥¶","‡¥®‡¥æ‡¥≠‡¥ø",
"‡¥®‡¥æ‡¥≠‡¥ø","‡¥ï‡¥£‡µç‡¥†‡¥Ç","‡¥ï‡¥£‡µç‡¥†‡¥Ç","‡¥∂‡¥ø‡¥∞‡¥∏‡µç","‡¥∂‡¥ø‡¥∞‡¥∏‡µç",
"‡¥™‡¥æ‡¥¶","‡¥®‡¥æ‡¥≠‡¥ø","‡¥∂‡¥ø‡¥∞‡¥∏‡µç"
];

// ================= MAIN =================
function checkPorutham(){
  const bName=v("bName"),gName=v("gName");
  const bDob=v("bDob"),gDob=v("gDob");
  const bTime=v("bTime"),gTime=v("gTime");
  if(!bName||!gName||!bDob||!gDob||!bTime||!gTime){
    alert("‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥ú‡¥®‡¥® ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï");return;
  }

  const bi=nakshatraIndex(bDob,bTime);
  const gi=nakshatraIndex(gDob,gTime);
  const dist=(gi-bi+27)%27||27;

  let rows=[],score=0,dosha=[];

  function add(name,pass,mark,exp){
    rows.push(`<tr><td>${name}</td><td class="${pass?'pass':'fail'}">${pass?'‚úîÔ∏è ‡¥Ö‡¥®‡µÅ‡¥Ø‡µã‡¥ú‡µç‡¥Ø‡¥Ç':'‚ùå ‡¥¶‡µã‡¥∑‡¥Ç'}</td><td>${mark}</td><td>${exp}</td></tr>`);
    score+=mark;
    if(!pass) dosha.push(name+" ‡¥¶‡µã‡¥∑‡¥Ç");
  }

  add("‡¥¶‡¥ø‡¥® ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç",[2,4,6,8,9].includes(dist),[0,2][+[2,4,6,8,9].includes(dist)],
      "‡¥Ü‡¥∞‡µã‡¥ó‡µç‡¥Ø‡¥µ‡µÅ‡¥Ç ‡¥Æ‡¥æ‡¥®‡¥∏‡¥ø‡¥ï ‡¥ê‡¥ï‡µç‡¥Ø‡¥µ‡µÅ‡¥Ç");

  add("‡¥ó‡¥£ ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç",gana[bi]==gana[gi]||gana[gi]=="‡¥¶‡µá‡¥µ",gana[bi]==gana[gi]||gana[gi]=="‡¥¶‡µá‡¥µ"?1:0,
      "‡¥∏‡µç‡¥µ‡¥≠‡¥æ‡¥µ ‡¥∏‡¥æ‡¥Æ‡µç‡¥Ø‡¥Ç");

  add("‡¥Æ‡¥π‡µá‡¥®‡µç‡¥¶‡µç‡¥∞ ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç",[4,7,10,13].includes(dist),[0,1][+[4,7,10,13].includes(dist)],
      "‡¥∏‡¥®‡µç‡¥§‡¥æ‡¥® ‡¥≠‡¥æ‡¥ó‡µç‡¥Ø‡¥Ç");

  add("‡¥∏‡µç‡¥§‡µç‡¥∞‡µÄ ‡¥¶‡µÄ‡µº‡¥ò‡¥Ç",dist>=9,dist>=9?1:0,"‡¥¶‡¥æ‡¥Æ‡µç‡¥™‡¥§‡µç‡¥Ø ‡¥¶‡µà‡µº‡¥ò‡µç‡¥Ø‡¥Ç");

  add("‡¥∞‡¥æ‡¥ú‡µç‡¥ú‡µÅ ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç",rajju[bi]!=rajju[gi],rajju[bi]!=rajju[gi]?2:0,
      "‡¥µ‡¥ø‡¥µ‡¥æ‡¥π ‡¥∏‡µç‡¥•‡¥ø‡¥∞‡¥§ (‡¥Ö‡¥§‡µÄ‡¥µ ‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥®‡¥Æ‡¥æ‡¥£‡µç)");

  add("‡¥∞‡¥æ‡¥∂‡¥ø ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç",Math.abs(bi-gi)>=5,Math.abs(bi-gi)>=5?2:0,
      "‡¥ß‡¥®‡¥Ç, ‡¥∏‡µÅ‡¥ñ‡¥Ç");

  add("‡¥Ø‡µã‡¥£‡¥ø ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç",bi!=gi,bi!=gi?1:0,"‡¥Ü‡¥ï‡µº‡¥∑‡¥£‡¥µ‡µÅ‡¥Ç ‡¥∏‡µó‡¥π‡µÉ‡¥¶‡¥µ‡µÅ‡¥Ç");

  let verdict="üî¥ ‡¥™‡¥∞‡¥ø‡¥π‡¥æ‡¥∞‡¥§‡µç‡¥§‡µã‡¥ü‡µÜ ‡¥Æ‡¥æ‡¥§‡µç‡¥∞‡¥Ç ‡¥µ‡¥ø‡¥µ‡¥æ‡¥π‡¥Ç ‡¥∂‡µÅ‡¥™‡¥æ‡µº‡¥∂ ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ";
  if(score>=8) verdict="üü¢ ‡¥â‡¥§‡µç‡¥§‡¥Æ ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç ‚Äì ‡¥µ‡¥ø‡¥µ‡¥æ‡¥π‡¥§‡µç‡¥§‡¥ø‡¥®‡µç ‡¥µ‡¥≥‡¥∞‡µÜ ‡¥Ö‡¥®‡µÅ‡¥ï‡µÇ‡¥≤‡¥Ç";
  else if(score>=6) verdict="üü° ‡¥∂‡¥∞‡¥æ‡¥∂‡¥∞‡¥ø ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç ‚Äì ‡¥™‡¥∞‡¥ø‡¥π‡¥æ‡¥∞‡¥Ç ‡¥Ü‡¥µ‡¥∂‡µç‡¥Ø‡¥Æ‡¥æ‡¥£‡µç";

  document.getElementById("result").innerHTML=`
<b>üïâÔ∏è ‡¥µ‡¥ø‡¥∂‡¥¶‡¥Æ‡¥æ‡¥Ø ‡¥µ‡¥ø‡¥µ‡¥æ‡¥π ‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§ ‡¥±‡¥ø‡¥™‡µç‡¥™‡µã‡µº‡¥ü‡µç‡¥ü‡µç</b><br><br>

<b>${bName}</b> ‚Äì ${nakshatras[bi]}<br>
<b>${gName}</b> ‚Äì ${nakshatras[gi]}<br><br>

<table>
<tr><th>‡¥™‡µä‡¥∞‡µÅ‡¥§‡µç‡¥§‡¥Ç</th><th>‡¥´‡¥≤‡¥Ç</th><th>‡¥Æ‡¥æ‡µº‡¥ï‡µç‡¥ï‡µç</th><th>‡¥µ‡¥ø‡¥∂‡¥¶‡µÄ‡¥ï‡¥∞‡¥£‡¥Ç</th></tr>
${rows.join("")}
</table><br>

<b>‡¥Ü‡¥ï‡µÜ ‡¥∏‡µç‡¥ï‡µã‡µº:</b>
<span class="score ${score>=8?'good':score>=6?'warn':'bad'}">${score} / 10</span><br><br>

<b>‡¥§‡µÄ‡¥∞‡µÅ‡¥Æ‡¥æ‡¥®‡¥Ç:</b><br>${verdict}<br><br>

<b>‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø‡¥Ø ‡¥¶‡µã‡¥∑‡¥ô‡µç‡¥ô‡µæ:</b><br>
${dosha.length?dosha.join(", "):"‚úî ‡¥™‡µç‡¥∞‡¥ß‡¥æ‡¥® ‡¥¶‡µã‡¥∑‡¥ô‡µç‡¥ô‡¥≥‡µä‡¥®‡µç‡¥®‡µÅ‡¥Ç ‡¥ï‡¥£‡µç‡¥ü‡µÜ‡¥§‡µç‡¥§‡¥ø‡¥Ø‡¥ø‡¥≤‡µç‡¥≤"}<br><br>

<i>‡¥≤‡¥π‡¥∞‡¥ø ‡¥Ö‡¥Ø‡¥®‡¥æ‡¥Ç‡¥∂‡¥Ç ‡¥â‡¥™‡¥Ø‡µã‡¥ó‡¥ø‡¥ö‡µç‡¥ö‡µÅ‡¥≥‡µç‡¥≥ ‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç ‡¥™‡¥û‡µç‡¥ö‡¥æ‡¥Ç‡¥ó‡¥Ç ‡¥ï‡¥£‡¥ï‡µç‡¥ï‡¥æ‡¥ï‡µç‡¥ï‡µΩ</i>
`;
  document.getElementById("result").style.display="block";
  document.getElementById("result").scrollIntoView({behavior:"smooth"});
}
function v(id){return document.getElementById(id).value.trim()}
</script>

</body>
</html>
